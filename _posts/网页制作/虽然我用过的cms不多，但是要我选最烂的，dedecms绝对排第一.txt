Title: 虽然我用过的cms不多，但是要我选最烂的，dedecms绝对排第一
Date: 2012-12-18 11:17:39
URL: /2012/12/the-most-worst-cms-is-dedecms/

某网站发现打不开，检查了下，被黑了。是dedecms，其实正常，dede这种一年发5、6个补丁，不被黑才怪了。

折腾一天多，总算折腾完，总结几个问题。

# 1、数据库备份、还原有问题。

我把数据库从生产拉下来，备份到本地vmware上做调试，用了bigdump和帝国备份王，都报错，没多想，于是用了dede自带的备份，这回没报错，搞完恢复回去的时候，打开文章打不开，老是提示“读取附加信息出错”，在百度，google和dede官方网站找了半天全是提问的，没一个解答的，倒是几乎每个帖子后面都有个人留qq说他搞了一天搞定的，要收费解决...

大多数问题说是表前缀有问题，但是我查了表前缀是一致的，没改过。顺手对比了下数据库，发现原来的60多m，新的只有11m。于是怀疑是数据库问题。

于是上navicat，这回恢复到生产的时候提示说“超出了mysql的max-allowed-packet”，参考：http://www.baalchina.net/2012/12/mysql-max-allowed-packet/。

于是修改生产的max-allowed-packet到16m，这次恢复不报错了。进入dede，也正常了。这顺带还解决了原来进入dede的模块菜单就504 gateway timeout的问题。

结论：

**dede的备份恢复机制存在问题。初步看了下（未仔细研究），在生产上面max-allowed-packet为1m的时候，备份数据只有11m，而max-allowed-packet=16m时，备份数据为63m。也就是50多m的数据没了。吐血不？**

ps，如果直接用navicat导出的数据是也是11m。老实说，不应该全怪dede，但是dede一点提示都没有，就是你的问题了。

官方网站打开速度巨慢，你就不能花点钱买点好的带宽？尤其那个软件下载栏目，经常是要过20s以上才弹出下面的下载链接：http://www.dedecms.com/products/dedecms/downloads/。

# 

2、漏洞太多

这个就不多说了。dede一向是漏洞王。好在他也提供了在线升级功能。功过相抵吧。这种情况还不更新只能是管理员不上心了。