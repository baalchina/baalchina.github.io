Title: H3C防火墙使用心得（Verison 1.1,20101213）
Date: 2010-12-11 22:49:01
URL: /2010/12/h3c-secblade/
Tags: firewall , h3c , SecBlade

防火墙抽风，于是最近开始测试H3C的防火墙，是S7510-E交换机的板卡。“**H3C SecBlade FW防火墙模块**”

网页在这里：[http://www.h3c.com.cn/Products___Technology/Products/IP_Security/FW_VPN/SecBlade/FW/](http://www.h3c.com.cn/Products___Technology/Products/IP_Security/FW_VPN/SecBlade/FW/ "http://www.h3c.com.cn/Products___Technology/Products/IP_Security/FW_VPN/SecBlade/FW/")

&#160;

周五花了一个晚上调试成功，和普通的独立墙区别还是比较大的，写下来备忘~如有错误，概不负责。![微笑](/wp-content/uploads/2010/12/wlEmoticon-smile.png)

&#160;

板卡式墙的特点

*   卡上虽然只有4个千兆电口，但是可以利用S7510E上面的板卡，也就是实际上接口的扩展性是非常强的，而一般的独立防火墙是很难达到这样的端口密度的。*   如果S7510E上面有万兆口，那么这个墙就是一个万兆墙。这个成本可比单独的墙要低多了。加上本身的成本也要比独立墙便宜，所以价格优势还是很大的。（这一款要比Hillstone的墙便宜5W左右）。*   据H3C工程师介绍，板卡是通过S7510E上面的万兆口互联的。这个如果两个万兆口会怎么样呢？应该会是一个瓶颈吧。不过无所谓啦，万兆至少目前还很稀有。*   可以很容易的对内网网段进行包过滤。以前要实现包过滤必须网段接口在防火墙上，而独立墙的接口是很珍贵的，现在的话只需要进行一些配置就可以操作了。  

配置

*   配置的时候是采用的将S7510的所有配置挪到了防火墙上实现的。*   将所有的SVI地址挪到了防火墙板卡上。以前是S7510和其他设备之间跑OSPF，现在是“防火墙板卡”和其他路由器跑OSPF。*   S7510机箱上有一个XGE0/0/1口，这个口就是和防火墙的连接口。*   我们配置的时候用的是2层方式。将这个口和防火墙上的万兆口打Trunk，然后允许所有数据包通过。SVI起在了放火墙板上，这样也就可以对任意网段进行包过滤了。  

&#160;

IPv6

*   IPv6没有测试是否支持。但是在web界面里面没有看到。还需要去了解下。  

双防火墙的热备

*   这个应该还是有点传统的交换机形式。两台墙分别起SVI地址，然后VRRP虚拟出新地址。这个地址既然是热备的，那么墙也就热备啦~  

其他功能

*   支持VPN，没测试*   支持流量监测，P2P检测。不过也没测试*   Web过滤也可以，还是没测试  

配置同步

*   由于没有找到配置同步的地方，所以现在是手动导出-&gt;导入。172.16段的路由和172.17段路由不一样，所以就会发现一般情况下开端口在1号墙配就行了。但是针对172.16的必须要到2号上也配置一下。这个很麻烦！  

缺点：

*   Web管理中，一般最后会默认加一条拒绝策略。但是这时候再新添加策略的时候，会跑到这条拒绝的后面，还得手动把它调整到前面去，很不方便。*   还是老问题，虽然设置了telnet的acl，被拒绝telnet的客户端还是可以打开端口，只是自动断开了。这个应该是h3c的os问题。*   双墙跑热备的时候，无法同步配置。测试其他墙配置可以自动或者手动同步，但是H3C的这个就不行。好在可以导出配置，然后再导入。*   配置策略的时候，Hillstone的墙在策略域那里可以直接设置为Any-Any，而这个必须要指定一个域。比如某一个服务要对全部区域开放，其他墙只要Any-Any就行了，这个却要设置Trust-Server,Untrust-Server，如果你还有DMZ1，DMZ2…不过我估计应该有更好的方法实现。这个待了解。